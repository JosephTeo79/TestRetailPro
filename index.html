<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retail Pro Prism - Auto Trigger</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; }
</style>
</head>
<body>

<h1>Welcome to Retail Pro Prism!</h1>
<p>Footfallcam / Retail Pro Bot will start automatically.</p>

<!-- Botpress Web Chat -->
<script src="https://cdn.botpress.cloud/webchat/v3.5/inject.js"></script>
<script>
window.addEventListener('load', function() {
  // 初始化 Botpress Web Chat
  window.botpressWebChat.init({
    botId: 'a513dc7b-a61b-4a0e-b0c2-79292f0f64b8',
    hostUrl: 'https://cdn.botpress.cloud/webchat/v3.5',
    messagingUrl: 'https://messaging.botpress.cloud',
    clientId: 'a77753bd-2319-48dd-a782-9d6ba282b204',
    lazySocket: true,
    showPoweredBy: true,
    useSessionStorage: true,
    hideWidget: false,
    composerPlaceholder: 'Chat with bot',
    botConversationDescription: 'This chatbot starts automatically'
  });

  // 页面加载后自动触发 trigger
  window.botpressWebChat.onEvent(function(event) {
    if (event.type === 'LIFECYCLE.READY') {
      console.log('Bot ready, sending trigger...');
      window.botpressWebChat.sendPayload({
        type: 'trigger',
        name: 'submain_form',
        payload: {
          userName: 'Joseph Teo',
          userEmail: 'hai2022my@gmail.com',
          welcome: 'Welcome to Retail Pro Prism!'
        }
      });
    }
  }, ['LIFECYCLE.READY']);
});
</script>

</body>
</html>
