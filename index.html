<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retail Pro Prism MVP</title>
<style>
  #bot-button {
    position: fixed;
    bottom: 90px;
    right: 20px;
    z-index: 1000;
    background: #007bff;
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 24px;
    cursor: pointer;
  }
  #bot-iframe {
    position: fixed;
    bottom: 160px;
    right: 20px;
    width: 400px;
    height: 500px;
    border: 1px solid #ccc;
    border-radius: 8px;
    display: none;
    z-index: 999;
  }
</style>
</head>
<body>

<h1>Retail Pro Prism MV1P</h1>

<button id="bot-button">ğŸ’¬</button>
<iframe id="bot-iframe"></iframe>

<!-- Botpress Webchat JS -->
<script src="https://cdn.botpress.cloud/webchat/v3.5/botpress.webchat.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const botButton = document.getElementById('bot-button');
  const botIframe = document.getElementById('bot-iframe');
  let botLoaded = false;

  // Botpress shareable URL
  const botUrl = 'https://cdn.botpress.cloud/webchat/v3.5/shareable.html' +
                 '?configUrl=https://files.bpcontent.cloud/2025/12/22/00/20251222001942-XSX123E9.json';

  // åˆå§‹åŒ– iframe
  if (!botLoaded) {
    botIframe.src = botUrl;
    botLoaded = true;
  }
  botIframe.style.display = 'block';

  // å½“ iframe åŠ è½½å®Œæˆåè§¦å‘ Custom Trigger
  botIframe.onload = function() {
    // ç­‰ iframe å†…éƒ¨çš„ botpressWebChat åˆå§‹åŒ–å®Œ
    setTimeout(() => {
      if (botIframe.contentWindow.botpressWebChat) {
        botIframe.contentWindow.botpressWebChat.sendEvent({
          type: 'form1', // ä½ åœ¨ Botpress Flow é‡Œåˆ›å»ºçš„ Custom Trigger å
          channel: 'web',
          payload: {
            page: 'Retail Pro Prism',
            userName: 'Joseph Teo',
            userEmail: 'hai2022my@gmail.com'
          }
        });
      }
    }, 500); // ç­‰ 500ms ç¡®ä¿ Webchat åˆå§‹åŒ–å®Œæˆ
  };

  // ç‚¹å‡»æŒ‰é’®åˆ‡æ¢æ˜¾ç¤º/éšè—èŠå¤©çª—å£
  botButton.addEventListener('click', function() {
    botIframe.style.display = (botIframe.style.display === 'none') ? 'block' : 'none';
  });
});
</script>

</body>
</html>
