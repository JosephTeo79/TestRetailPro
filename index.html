<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retail Pro Prism MVP</title>
<style>
  #bot-button { position:fixed; bottom:90px; right:20px; z-index:1000; background:#007bff; color:#fff; border:none; border-radius:50%; width:60px; height:60px; font-size:24px; cursor:pointer; }
  #bot-iframe { position:fixed; bottom:160px; right:20px; width:400px; height:500px; border:1px solid #ccc; border-radius:8px; display:none; z-index:999; }
</style>
</head>
<body>

<h1>Retail Pro Prism MVP</h1>

<button id="bot-button">ğŸ’¬</button>
<iframe id="bot-iframe"></iframe>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const botButton = document.getElementById('bot-button');
  const botIframe = document.getElementById('bot-iframe');
  let botLoaded = false;

  // æ„å»º Botpress shareable URL
  function buildBotUrl() {
    const params = new URLSearchParams({
      trigger: 'submain_form',      // è‡ªåŠ¨è§¦å‘çš„ trigger
      page: 'Retail Pro Prism',
      userName: 'Joseph Teo',
      userEmail: 'hai2022my@gmail.com'
    });
    return 'https://cdn.botpress.cloud/webchat/v3.5/shareable.html' +
           '?configUrl=https://files.bpcontent.cloud/2025/12/22/00/20251222001942-XSX123E9.json' +
           '&' + params.toString();
  }

  // é¡µé¢æ‰“å¼€è‡ªåŠ¨æ˜¾ç¤ºå¹¶ trigger
  if (!botLoaded) {
    botIframe.src = buildBotUrl();
    botLoaded = true;
  }
  botIframe.style.display = 'block';

  // ç‚¹å‡»æŒ‰é’®åˆ‡æ¢æ˜¾ç¤º/éšè—
  botButton.addEventListener('click', function() {
    botIframe.style.display = (botIframe.style.display === 'none') ? 'block' : 'none';
  });
});
</script>

</body>
</html>
