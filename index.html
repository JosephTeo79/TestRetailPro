<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Botpress Botbassador Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 2rem;
    background-color: #f4f4f4;
    color: #333;
  }
  h1, h2 { text-align: center; }
  #myform {
    max-width: 600px;
    margin: 2rem auto;
    background-color: #fff;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
  }
  label { display:block; margin-bottom:0.5rem; font-weight:bold; }
  input, textarea {
    width:100%; padding:0.5rem; margin-bottom:1rem;
    border:1px solid #ddd; border-radius:5px; font-size:1rem;
  }
  button {
    background-color: #007BFF; color:#fff; padding:0.7rem 1.5rem;
    font-size:1rem; border:none; border-radius:5px; cursor:pointer;
    display:block; margin: 0 auto;
  }
  button:hover { background-color: #0056b3; }
</style>
</head>
<body>

<h1>Botpress Botbassador Program</h1>
<h2>Demo Form to Trigger Bot</h2>

<form id="myform">
  <label for="name">Full Name1:</label>
  <input type="text" id="name" name="name" required>

  <label for="email">Email:</label>
  <input type="email" id="email" name="email" required>

  <label for="linkedin">LinkedIn URL:</label>
  <input type="text" id="linkedin" name="linkedin" required>

  <label for="message">Message:</label>
  <textarea id="message" name="message" rows="5"></textarea>

  <button type="submit">Submit & Trigger Bot</button>
</form>

<!-- Botpress Webchat v3.5 -->
<script src="https://cdn.botpress.cloud/webchat/v3.5/inject.js" onload="initBot()"></script>

<script>
  function initBot() {
    window.botpressWebChat.init({
      botId: "XSX123E9",
      hostUrl: "https://cdn.botpress.cloud/webchat/v3.5",
      messagingUrl: "https://messaging.botpress.cloud",
      hideWidget: true,
      lazySocket: true,
      useSessionStorage: true
    });

    // 表单提交事件
    const form = document.getElementById('myform');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const detail = {
        name: form.name.value,
        email: form.email.value,
        linkedin: form.linkedin.value,
        message: form.message.value,
        position: "Botbassador"
      };
      window.botpressWebChat.sendEvent({ type: 'show' });

      const sendPayloadWhenReady = () => {
        if (window.botpressWebChat && window.botpressWebChat.isReady) {
          window.botpressWebChat.sendPayload({ type: 'trigger', payload: detail });
        } else {
          setTimeout(sendPayloadWhenReady, 50);
        }
      };
      sendPayloadWhenReady();
    });

    window.botpressWebChat.onEvent((event) => {
      if (event.type === 'LIFECYCLE.READY') {
        window.botpressWebChat.isReady = true;
        console.log('Botpress Ready');
      }
    });
  }
</script>

<script src="https://cdn.botpress.cloud/webchat/v3.5/inject.js" onload="initBot()"></script>


</body>
</html>
