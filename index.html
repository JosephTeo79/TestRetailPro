<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Botpress Hardcoded Trigger</title>
</head>
<body>

<button id="triggerBotAction1">Button1</button>
<button id="triggerBotAction2">Button2</button>

<script>
  // 延迟加载 inject.js
  const script = document.createElement('script');
  script.src = "https://cdn.botpress.cloud/webchat/v3.5/inject.js";
  script.async = true;
  script.onload = () => {
    if (!window.botpressWebChat) {
      console.error("Botpress failed to load: check HTTPS or hosting");
      return;
    }

    // 初始化 Webchat
    window.botpressWebChat.init({
      configUrl: "https://files.bpcontent.cloud/2025/12/22/00/20251222001942-XSX123E9.json"
    });

    console.log("Webchat is ready");

    document.getElementById('triggerBotAction1').addEventListener('click', async () => {
      await window.botpressWebChat.sendEvent({ type: "proactive-trigger", payload: { trigger: "action1" } });
      console.log("Sent action1");
    });

    document.getElementById('triggerBotAction2').addEventListener('click', async () => {
      await window.botpressWebChat.sendEvent({ type: "proactive-trigger", payload: { trigger: "action2" } });
      console.log("Sent action2");
    });
  };
  document.body.appendChild(script);
</script>

</body>
</html>
