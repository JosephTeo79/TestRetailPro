<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Botpress Trigger Test</title>
<style>
  button { margin: 10px; padding: 10px 20px; font-size: 16px; }
</style>
</head>
<body>

<button id="triggerBotAction1">Button1</button>
<button id="triggerBotAction2">Button2</button>

<script src="https://cdn.botpress.cloud/webchat/v3.5/inject.js"
        data-bot-id="XSX123E9"
        data-config-url="https://files.bpcontent.cloud/2025/12/22/00/20251222001942-XSX123E9.json">
</script>

<script>
window.botpressWebChat = window.botpressWebChat || {};

// 使用 webchat:ready 确保 iframe 已经准备好
window.botpressWebChat.onEvent = window.botpressWebChat.onEvent || function () {};
window.botpressWebChat.onEvent('webchat:ready', () => {
  console.log("Webchat is ready");

  const sendTrigger = async (actionName) => {
    const payload = {
      type: "proactive-trigger",
      payload: { action: actionName }
    };
    console.log("Sending payload:", payload);
    await window.botpressWebChat.sendEvent(payload);
  };

  document.getElementById('triggerBotAction1').addEventListener('click', () => sendTrigger("action1"));
  document.getElementById('triggerBotAction2').addEventListener('click', () => sendTrigger("action2"));
});
</script>

</body>
</html>
