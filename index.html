<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SubMain - Retail Pro Prism</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  #bot-iframe {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 400px;
    height: 500px;
    border: 1px solid #ccc;
    border-radius: 8px;
    z-index: 999;
  }
</style>
</head>
<body>

<h1>SubMain Page</h1>
<p>这里是 SubMain 内容。</p>

<iframe id="bot-iframe"></iframe>

<script>
  const botIframe = document.getElementById('bot-iframe');

  const botConfigUrl = "https://files.bpcontent.cloud/2025/12/22/00/20251222001942-XSX123E9.json";

  // 自动加载 iframe
  botIframe.src = `https://cdn.botpress.cloud/webchat/v3.5/shareable.html?configUrl=${encodeURIComponent(botConfigUrl)}`;

  // 等 iframe 加载完，发送自定义事件
  botIframe.onload = () => {
    botIframe.contentWindow.postMessage(
      {
        type: 'custom',
        channel: 'web',
        payload: { entry: 'SubMain' }
      },
      '*'
    );
  };
</script>

</body>
</html>
