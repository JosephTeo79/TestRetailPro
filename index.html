<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SubMain - Retail Pro Prism</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  #bot-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: #007bff;
    color: white;
    font-size: 24px;
    border: none;
    cursor: pointer;
    z-index: 1000;
  }
</style>
</head>
<body>

<h1>SubMain Page</h1>
<p>è¿™é‡Œæ˜¯ SubMain å†…å®¹ã€‚</p>

<!-- Botpress æŒ‰é’® -->
<button id="bot-button">ðŸ’¬</button>

<!-- Botpress Webchat -->
<script src="https://cdn.botpress.cloud/webchat/v3.5/inject.js"></script>
<script>
  // æƒ³æ˜¾ç¤ºçš„ entry å
  const entryName = "SubMain";

  const botButton = document.getElementById('bot-button');
  let webchatReady = false;

  // ç­‰ Botpress Webchat å®Œå…¨åŠ è½½
  window.addEventListener('bpWebChatReady', () => {
    console.log('Botpress Webchat ready');
    webchatReady = true;
  });

  botButton.addEventListener('click', () => {
    if (!webchatReady) {
      alert('Botpress Webchat not loaded yet. Please wait a few seconds.');
      return;
    }

    // åˆå§‹åŒ– Webchatï¼ˆåªæ‰§è¡Œä¸€æ¬¡ï¼‰
    if (!window.botpressWebChat.inited) {
      window.botpressWebChat.init({
        botId: "XSX123E9",
        hostUrl: "https://messaging.botpress.cloud",
        messagingUrl: "https://messaging.botpress.cloud",
        showPoweredBy: false,
        enableConversationDeletion: false
      });
      window.botpressWebChat.inited = true;
    }

    // æ‰“å¼€/åˆ‡æ¢ Webchat
    window.botpressWebChat.toggle();

    // å‘é€è‡ªå®šä¹‰äº‹ä»¶åˆ° Botpress Flow
    window.botpressWebChat.sendEvent({
      type: 'custom',
      channel: 'web',
      payload: { entry: entryName }
    });
  });

  // âœ… è‡ªåŠ¨æ‰“å¼€ Botpress å¹¶å‘é€äº‹ä»¶ï¼ˆå¯é€‰ï¼‰
  // window.addEventListener('load', () => botButton.click());
</script>

</body>
</html>
